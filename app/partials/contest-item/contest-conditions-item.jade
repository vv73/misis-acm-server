div.contest
  div.contest__content.contest__min-width
    div.contest__inner
      div.task
        div.task__title
          a.task__title-link(ui-sref='^.conditions') Условия задач
          div.task__title-delimiter
            span >
          div.task__title-index
            span(ng-bind='condition.internal_index + ". " + condition.title + ""')

        div.task__own(ng-if='condition.attachments')
          div(ng-if='condition.attachments.files && condition.attachments.files.length > 0 && condition.attachments.config.files_location === "top"')
            div
              h4 Файлы: {{condition.attachments.files.length}}
            div.task__files
              div.task__file-wrap(ng-repeat='file in condition.attachments.files | orderBy:" file.type"')
                div(ng-switch='file.type')
                  div(ng-switch-when='image')
                    a.link(ng-href='{{file.url}}', target='_blank')
                      img.image.markdown__image(ng-src='{{file.url}}')

                  div(ng-switch-default)
                    a.link(ng-href='{{file.url}}', target='_blank')
                      div.task__file(tabindex='{{$index}}')
                        div.task__file-title {{"Приложение" + (condition.attachments.files.length > 1 ? (" " + ($index + 1)) : "")}}
                        div.task__file-ext
                          div(class='task__file-ext-icon task__file-ext-icon_type_{{file.type}}')
                          span {{file.type}}
          div.markdown__divider

        div.task__problem(ng-if='!condition.attachments.config.replaced',
        ng-class='{"task__problem-timus": condition.system_type === "timus", \
        "task__problem-sgu": condition.system_type === "sgu", \
        "task__problem-cf": condition.system_type === "cf", \
        "task__problem-acmp": condition.system_type === "acmp", \
        "task__problem-cf_type_gym": condition.system_problem_number.indexOf("gym") >= 0 }')
          div(ng-bind-html='condition.formatted_text')

        div.task__own(ng-if='condition.attachments')
          div(ng-if='condition.attachments.content.text')
            div(ng-switch='condition.attachments.config.markup')
              div(ng-switch-when='markdown')
                div.markdown(marked='condition.attachments.content.text')
              div(ng-switch-default)
                p Not implemented

          div.markdown__divider
          div(ng-if='condition.attachments.files && condition.attachments.files.length > 0 && (!condition.attachments.config.files_location || condition.attachments.config.files_location === "bottom")')
            div
              h4 Файлы: {{condition.attachments.files.length}}
            div.task__files
              div.task__file-wrap(ng-repeat='file in condition.attachments.files | orderBy:" file.type"')
                div(ng-switch='file.type')
                  div(ng-switch-when='image')
                    a.link(ng-href='{{file.url}}', target='_blank')
                      img.image.markdown__image(ng-src='{{file.url}}')

                  div(ng-switch-default)
                    a.link(ng-href='{{file.url}}', target='_blank')
                      div.task__file(tabindex='{{$index}}')
                        div.task__file-title {{"Приложение" + (condition.attachments.files.length > 1 ? (" " + ($index + 1)) : "")}}
                        div.task__file-ext
                          div(class='task__file-ext-icon task__file-ext-icon_type_{{file.type}}')
                          span {{file.type}}


        div.task__send-layer
          div.task__send
            md-button.md-primary(ui-sref='^.send-item({problemIndex: condition.internal_index})') Отправить решение

